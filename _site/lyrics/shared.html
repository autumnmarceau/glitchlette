<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Shared Lyrics — Glitchlette</title>

<style>
  @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');

  /* Reset & base */
  * {
    box-sizing: border-box;
  }
  body, html {
    margin: 0; padding: 0;
    height: 100%;
    font-family: 'Share Tech Mono', monospace;
    background: url('/photos/purpleskybg.png') no-repeat center center fixed;
    background-size: cover;
    color: #ccccee;
    overflow: hidden;
  }

  /* Layout: sidebar + main container */
  #app-container {
    display: flex;
    height: 100vh;
    width: 100vw;
  }

  /* Sidebar styling */
  #sidebar {
    width: 320px;
    background: linear-gradient(135deg, #2c004b, #4b006e);
    box-shadow: inset 0 0 20px #7a00cc99;
    padding: 1.5rem 1rem 1rem 1rem;
    display: flex;
    flex-direction: column;
    align-items: stretch;
    user-select: none;
  }

  /* Pinned message in sidebar (like a window) */
  .pinned-message {
    background: linear-gradient(135deg, #330044 0%, #660099 100%);
    border: 3px solid #aa66ff;
    box-shadow:
      0 0 18px #aa66ffcc,
      inset 0 0 25px #bb77ffcc;
    color: #e0d9ff;
    font-size: 1rem;
    padding: 1.2rem 1.5rem;
    border-radius: 14px;
    margin-bottom: 2rem;
    text-align: center;
    letter-spacing: 0.04em;
    line-height: 1.3;
    flex-shrink: 0;
  }
  .pinned-message .icon {
    font-weight: bold;
    font-size: 1.3rem;
    margin: 0 0.15rem;
    text-shadow:
      0 0 8px #d3b3ff,
      0 0 15px #aa66ff;
  }
  .pinned-message .glitch-text {
    animation: glitchText 3s infinite;
    color: #d7caff;
    text-shadow:
      1px 0 #bb99ff,
      -1px 0 #8855ff,
      0 1px #ccbbff,
      0 -1px #aa88ff;
  }
  @keyframes glitchText {
    0%, 100% {
      text-shadow:
        1px 0 #bb99ff,
        -1px 0 #8855ff,
        0 1px #ccbbff,
        0 -1px #aa88ff;
      transform: none;
      opacity: 1;
    }
    20% {
      text-shadow:
        2px 0 #7744cc,
        -2px 0 #440099,
        0 2px #9966ff,
        0 -2px #6633cc;
      transform: translate(1px, -1px) skew(1deg, 0deg);
      opacity: 0.9;
    }
    40% {
      text-shadow:
        0 0 #aa66ff,
        0 0 #bb77ff,
        1px 1px #cc99ff,
        -1px -1px #bb88ff;
      transform: translate(-1px, 1px) skew(-1deg, 1deg);
      opacity: 0.85;
    }
    60% {
      text-shadow:
        1px 1px #9966ff,
        -1px -1px #7755cc,
        0 0 #8855ff,
        0 0 #5522aa;
      transform: translate(1px, 1px);
      opacity: 0.9;
    }
    80% {
      text-shadow:
        2px 2px #6622cc,
        -2px -2px #440099,
        0 0 #7733ff,
        0 0 #4411cc;
      transform: translate(-1px, -1px);
      opacity: 0.95;
    }
  }

  /* Sidebar nav */
  #sidebar nav {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  #sidebar nav a {
    color: #cdaaff;
    text-decoration: none;
    font-size: 1.1rem;
    padding: 0.4rem 0.8rem;
    border-left: 3px solid transparent;
    transition: border-color 0.3s ease, color 0.3s ease;
    user-select: text;
  }
  #sidebar nav a:hover,
  #sidebar nav a:focus {
    color: #ffccff;
    border-left-color: #ff99ff;
    outline: none;
  }

  /* Main content area */
  #main-content {
    flex-grow: 1;
    margin: 2rem;
    background: linear-gradient(145deg, #1a003a, #3b006a);
    border: 3px solid #aa66ff;
    border-radius: 18px;
    box-shadow:
      0 0 25px #bb77ffcc,
      inset 0 0 50px #aa66ffcc;
    padding: 2rem;
    overflow-y: auto;
    color: #d0cce7;
    filter: drop-shadow(0 0 12px #cc99ff);
    position: relative;
  }

  /* Scrollbar styling for main content */
  #main-content::-webkit-scrollbar {
    width: 12px;
  }
  #main-content::-webkit-scrollbar-track {
    background: #2e0058;
  }
  #main-content::-webkit-scrollbar-thumb {
    background: #aa66ffaa;
    border-radius: 6px;
  }
  #main-content::-webkit-scrollbar-thumb:hover {
    background: #dd99ffcc;
  }

  /* Lyrics windows container (flex wrap) */
  .lyrics-windows {
    display: flex;
    flex-wrap: wrap;
    gap: 1.5rem;
    justify-content: flex-start;
  }

  /* Each lyric window */
  .lyrics-window {
    background: #2a004d;
    border: 2px solid #bb77ff;
    box-shadow:
      0 0 12px #cc99ff,
      inset 0 0 30px #aa66ff;
    border-radius: 12px;
    width: 300px;
    max-height: 420px;
    overflow-y: auto;
    padding: 1rem 1.2rem;
    position: relative;
    filter: drop-shadow(0 0 8px #bb77ffcc);
    animation: flicker 3s infinite alternate;
    color: #e3dfff;
  }

  /* Window header */
  .window-header {
    display: flex;
    justify-content: space-between;
    font-weight: bold;
    font-size: 1rem;
    margin-bottom: 0.8rem;
    border-bottom: 1px solid #bb77ff;
    padding-bottom: 0.3rem;
    text-transform: uppercase;
    color: #dcbaff;
  }

  /* Lyrics content */
  .lyrics-content {
    white-space: pre-wrap;
    font-size: 0.9rem;
    line-height: 1.4;
    color: #d3c9ff;
    font-family: 'Share Tech Mono', monospace;
  }

  /* Flicker animation */
  @keyframes flicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.85; }
  }

  /* Back link relocated to sidebar bottom */
  #back-link {
    margin-top: auto;
    color: #cdaaff;
    font-weight: bold;
    font-family: 'Share Tech Mono', monospace;
    text-decoration: none;
    padding: 0.6rem 0.8rem;
    border-left: 3px solid transparent;
    user-select: text;
    transition: border-color 0.3s ease, color 0.3s ease;
  }
  #back-link:hover,
  #back-link:focus {
    color: #ffccff;
    border-left-color: #ff99ff;
    outline: none;
  }

  /* Loading screen overlay */
  #loading-screen {
    position: fixed;
    inset: 0;
    background: #1a004480;
    backdrop-filter: blur(6px);
    display: flex;
    justify-content: center;
    align-items: center;
    color: #bb88ff;
    font-family: 'Share Tech Mono', monospace;
    font-size: 2.4rem;
    letter-spacing: 0.2em;
    user-select: none;
    z-index: 10000;
  }
</style>
</head>
<body>

<div id="loading-screen" aria-live="assertive" aria-label="Loading screen">
  <span id="loading-text">████████████████</span>
</div>

<div id="app-container" role="main">

  <aside id="sidebar" aria-label="Sidebar with message and navigation">
    <div class="pinned-message" role="region" aria-live="polite" aria-atomic="true" tabindex="0">
      <span class="glitch-text">Lyrics from the Wraith Space...</span>
    </div>

    <nav aria-label="Primary site navigation">
      <a href="index.html" tabindex="0">Lyric Generator</a>
      <a href="shared.html" tabindex="0">Shared Lyrics</a>
      <a href="glitchlette.com" tabindex="0">Back to Main Site</a>
      <!-- Add other links as needed -->
    </nav>

    <a href="index.html" id="back-link" tabindex="0" aria-label="Back to main site">← Back to Main Site</a>
  </aside>

  <section id="main-content" tabindex="0" aria-label="Shared lyrics submissions container">
    <div class="lyrics-windows" id="lyrics-list" role="list">
      <!-- Example lyric windows: Replace with dynamic content in production -->
      <article class="lyrics-window" tabindex="0" aria-label="Shared lyrics from user Alice" role="listitem">
        <div class="window-header">Alice</div>
        <div class="lyrics-content">
          the shadow falls, the mind dissolves<br>
          whispers call, in neon halls<br>
          fractured dreams like broken glass<br>
          wading through the aftermath
        </div>
      </article>

      <article class="lyrics-window" tabindex="0" aria-label="Shared lyrics from user Bob" role="listitem">
        <div class="window-header">Bob</div>
        <div class="lyrics-content">
          bleeding stars from blackened skies<br>
          haunted eyes with silent cries<br>
          nebulae carve through the void<br>
          eraser heads, a ghost deployed
        </div>
      </article>

      <!-- Add your Staticman generated submissions here -->
    </div>
  </section>

</div>

<script>
  // Loading screen scramble text animation

  const loadingScreen = document.getElementById('loading-screen');
  const loadingTextEl = document.getElementById('loading-text');
  const finalText = 'LOADING TRANSMISSIONS';
  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()-_=+[]{}<>?';
  let iteration = 0;
  let scrambleDuration = 3000; // milliseconds
  let intervalTime = 50; // update every 50ms

  function scrambleText(text, iteration) {
    return text
      .split('')
      .map((char, index) => {
        if(index < iteration) {
          return text[index];
        }
        return chars.charAt(Math.floor(Math.random() * chars.length));
      })
      .join('');
  }

  let scrambleInterval = setInterval(() => {
    iteration += 1;
    if (iteration > finalText.length) {
      iteration = finalText.length;
      clearInterval(scrambleInterval);
      loadingTextEl.textContent = finalText;
      setTimeout(() => {
        loadingScreen.style.display = 'none';
        // Allow body to scroll after loading
        document.body.style.overflow = 'auto';
      }, 1000);
      return;
    }
    loadingTextEl.textContent = scrambleText(finalText, iteration);
  }, intervalTime);

  // Initially hide scroll on body while loading
  document.body.style.overflow = 'hidden';
</script>

</body>
</html>
